# gometrum example configuration
#
# Notes:
# - Sensors are enabled by presence.
#   Comment out a sensor block to disable it.
# - Each sensor defines its own refresh interval.
# - Intervals use Go duration format: "5s", "30s", "1m", "5m".

log:
  # Global minimum log level for console output and as a default for sinks.
  # Supported: debug, info, warn, error
  level: info

  # Optional sinks. Console logging is always enabled.
  sinks:
    - type: udp
      name: "UDP sink"
      addr: 127.0.0.1:8222

      # Per-sink minimum log level (inherits from log.level if omitted)
      level: warn

      # Optional queue size (bounded). When full, the oldest entries are dropped.
      # Keep it small to minimize memory usage.
      queue_size: 50

    - type: http
      name: "HTTP sink"
      url: http://127.0.0.1:8111/api/v1/push

      # Per-sink minimum log level (inherits from log.level if omitted)
      level: warn

      # Payload format:
      # - event_json: one JSON object per request
      # - text: plain text per request
      # - ndjson: batches as newline-delimited JSON (recommended for batching)
      # - loki: batches in Grafana Loki push API format
      codec: ndjson

      # HTTP request settings
      method: POST
      timeout: 2s

      # Optional HTTP headers
      headers:
        Authorization: "Bearer LOG_API_TOKEN"

      # Optional queue size (bounded). When full, the oldest entries are dropped.
      queue_size: 50

      # Optional batching configuration.
      # Used only for codecs that support batching (ndjson, loki).
      # Ignored for event_json and text.
      batch:
        # Maximum number of log events per request.
        # Defaults to 20 if omitted.
        max_items: 20

        # Maximum time to wait before flushing a partially filled batch.
        # Defaults to 1s if omitted.
        max_wait: 1s

mqtt:
  # MQTT broker address
  host: localhost

  # MQTT broker port
  port: 1883

  # Optional authentication
  username: ""
  password: ""

  # MQTT client identifier.
  # Must be unique per agent instance.
  client_id: ""

  # Home Assistant MQTT discovery prefix
  discovery_prefix: "homeassistant"

  # Base topic for published sensor states
  state_prefix: "gometrum"

  # Default refresh interval for sensors.
  # Used only when a sensor does not define its own interval.
  default_interval: "30m"

agent:
  # Unique device identifier used by Home Assistant.
  # Required. Must be unique per device.
  device_id: ""

  # Human-readable device name
  device_name: "gometrum"

  # Device manufacturer (Home Assistant metadata)
  manufacturer: "gometrum"

  # Device model (Home Assistant metadata)
  model: "linux-host"

sensors:
  # CPU usage percentage
  cpu_usage:
    name: "CPU usage"
    interval: "30s"
    ha:
      # Optional Home Assistant overrides
      icon: "mdi:cpu-64-bit"
      unit: "%"
      device_class: ""
      state_class: "measurement"

  # CPU load average (1 minute)
  cpu_load_1m:
    interval: "30s"

  # CPU load average (5 minutes)
  cpu_load_5m:
    interval: "30s"

  # CPU load average (15 minutes)
  cpu_load_15m:
    interval: "30s"

  # CPU temperature
  cpu_temp:
    interval: "30s"

  # System uptime
  uptime:

  # Operating system version
  os_version:

  # Hostname
  hostname:

  # RAM usage percentage
  memory_usage:
    interval: "30s"

  # Swap usage percentage
  swap_usage:
    interval: "30s"

  # Disk usage per mount point (creates one sensor per mount)
  disk_usage:
    include_mounts: ["/", "/mnt/data"]

  # Host IP address
  host_ip:

  # Wi-Fi signal strength
  wifi_signal:

  # Connected Wi-Fi network name (SSID)
  wifi_ssid:

  # GPU usage percentage
  gpu_usage:
    interval: "30s"

  # GPU memory usage percentage
  gpu_memory_usage:
    interval: "30s"

  # GPU temperature
  gpu_temp:
    interval: "30s"

  # GPU power consumption
  gpu_power:
    interval: "30s"
